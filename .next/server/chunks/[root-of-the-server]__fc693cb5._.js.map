{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/cbr/history/route.ts"],"sourcesContent":["\nimport { NextResponse, type NextRequest } from 'next/server';\nimport { parseStringPromise } from 'xml2js';\n\nexport async function GET(request: NextRequest) {\n  const { searchParams } = request.nextUrl;\n  const dateReq = searchParams.get('date_req'); // format dd/mm/yyyy\n\n  if (!dateReq) {\n    return NextResponse.json({ error: 'date_req is required' }, { status: 400 });\n  }\n\n  const url = `http://www.cbr.ru/scripts/XML_daily.asp?date_req=${dateReq}`;\n\n  try {\n    const apiResponse = await fetch(url, {\n      headers: { 'Accept': 'application/xml' },\n      cache: 'no-store'\n    });\n\n    if (!apiResponse.ok) {\n        return NextResponse.json({ error: `CBR API request failed` }, { status: apiResponse.status });\n    }\n\n    const buffer = await apiResponse.arrayBuffer();\n    const decoder = new TextDecoder('windows-1251');\n    const xmlText = decoder.decode(buffer);\n\n    const jsonData = await parseStringPromise(xmlText);\n    return NextResponse.json(jsonData);\n\n  } catch (error: any) {\n    return NextResponse.json({ error: 'Failed to fetch from CBR API', message: error.message }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,QAAQ,OAAO;IACxC,MAAM,UAAU,aAAa,GAAG,CAAC,aAAa,oBAAoB;IAElE,IAAI,CAAC,SAAS;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;IAEA,MAAM,MAAM,CAAC,iDAAiD,EAAE,SAAS;IAEzE,IAAI;QACF,MAAM,cAAc,MAAM,MAAM,KAAK;YACnC,SAAS;gBAAE,UAAU;YAAkB;YACvC,OAAO;QACT;QAEA,IAAI,CAAC,YAAY,EAAE,EAAE;YACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,CAAC,sBAAsB,CAAC;YAAC,GAAG;gBAAE,QAAQ,YAAY,MAAM;YAAC;QAC/F;QAEA,MAAM,SAAS,MAAM,YAAY,WAAW;QAC5C,MAAM,UAAU,IAAI,YAAY;QAChC,MAAM,UAAU,QAAQ,MAAM,CAAC;QAE/B,MAAM,WAAW,MAAM,IAAA,+JAAkB,EAAC;QAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE3B,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAAgC,SAAS,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC5G;AACF","debugId":null}}]
}