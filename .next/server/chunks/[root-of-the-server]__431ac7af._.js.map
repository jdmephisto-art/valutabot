{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/nbk/route.ts"],"sourcesContent":["\nimport { NextResponse } from 'next/server';\nimport { parseStringPromise } from 'xml2js';\n\nexport async function GET() {\n  const url = 'https://nationalbank.kz/rss/rates_all.xml';\n\n  try {\n    const apiResponse = await fetch(url, {\n      next: { revalidate: 3600 }\n    });\n\n    if (!apiResponse.ok) {\n      return NextResponse.json({ error: 'NBK API failed' }, { status: apiResponse.status });\n    }\n\n    const xmlText = await apiResponse.text();\n    const jsonData = await parseStringPromise(xmlText);\n    \n    const rates: Record<string, number> = {};\n    const items = jsonData?.rates?.item;\n\n    if (items) {\n      items.forEach((item: any) => {\n        const title = item.title[0]; // e.g. \"USD\"\n        const description = parseFloat(item.description[0]); // rate to KZT\n        const quant = parseInt(item.quant[0]);\n        \n        rates[title] = description / quant;\n      });\n      // Base for these rates is KZT, we will normalize to USD in the lib\n    }\n\n    return NextResponse.json(rates);\n  } catch (error: any) {\n    return NextResponse.json({ error: 'Failed to fetch from NBK', message: error.message }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAEO,eAAe;IACpB,MAAM,MAAM;IAEZ,IAAI;QACF,MAAM,cAAc,MAAM,MAAM,KAAK;YACnC,MAAM;gBAAE,YAAY;YAAK;QAC3B;QAEA,IAAI,CAAC,YAAY,EAAE,EAAE;YACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ,YAAY,MAAM;YAAC;QACrF;QAEA,MAAM,UAAU,MAAM,YAAY,IAAI;QACtC,MAAM,WAAW,MAAM,IAAA,+JAAkB,EAAC;QAE1C,MAAM,QAAgC,CAAC;QACvC,MAAM,QAAQ,UAAU,OAAO;QAE/B,IAAI,OAAO;YACT,MAAM,OAAO,CAAC,CAAC;gBACb,MAAM,QAAQ,KAAK,KAAK,CAAC,EAAE,EAAE,aAAa;gBAC1C,MAAM,cAAc,WAAW,KAAK,WAAW,CAAC,EAAE,GAAG,cAAc;gBACnE,MAAM,QAAQ,SAAS,KAAK,KAAK,CAAC,EAAE;gBAEpC,KAAK,CAAC,MAAM,GAAG,cAAc;YAC/B;QACA,mEAAmE;QACrE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAA4B,SAAS,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACxG;AACF","debugId":null}}]
}